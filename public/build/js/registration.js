!function(){let e=[];const t=document.querySelector("#userRegistration__summary"),n=document.querySelectorAll(".event__add"),o=document.querySelector("#registrationForm");function i(t){if(e.length>=5)return void s("Límite Alcanzado","No puedes seleccionar más de 5 eventos");button=t.target;e.some((e=>e.id===button.dataset.id))||(e=[...e,{id:button.dataset.id,title:button.parentElement.querySelector(".event__name").textContent.trim()}]),button.disabled=!0,a()}function a(){if(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(t),0===e.length){const e=document.createElement("P");e.textContent="No tienes eventos seleccionados",e.classList.add("registrationEvent__message"),t.appendChild(e)}else e.forEach((n=>{const o=document.createElement("DIV");o.classList.add("registrationEvent__event");const i=document.createElement("H4");i.classList.add("registrationEvent__name"),i.textContent=n.title;const r=document.createElement("BUTTON");r.classList.add("registrationEvent__button"),r.innerHTML='<i class="fa-solid fa-trash"></i>',r.onclick=function(){!function(t){e=e.filter((e=>e.id!==t));document.querySelector(`[data-id="${t}"]`).disabled=!1,a()}(n.id)},o.appendChild(i),o.appendChild(r),t.appendChild(o)}))}function r(t){t.preventDefault();const n=document.querySelector("#gift").value,o=e.map((e=>e.id));0!==o.length&&""!==n?async function(e,t){const n="/finalizar-registro/conferencias",o=new FormData;o.append("gift_id",e),o.append("events_id",t);try{const e=await fetch(n,{method:"POST",body:o}),t=await e.json();t.result?function(e,t,n){Swal.fire({icon:"success",title:e,text:t}).then((()=>{window.location.href=n}))}("Registro Exitoso","Tus conferencias y regalo se han almacenado, te esperamos en DevWebCamp",`/boleto?id=${t.token}`):s("Error","Hubo un error al almacenar tus conferencias y regalo")}catch(e){console.log(e)}}(n,o):s("Datos Incompletos","Elige al menos un evento y tu regalo")}function s(e,t){Swal.fire({icon:"error",title:e,text:t})}document.addEventListener("DOMContentLoaded",(function(){t&&(a(),n.forEach((e=>{e.addEventListener("click",i)})),o.addEventListener("submit",r))}))}();//# sourceMappingURL=registration.js.map
